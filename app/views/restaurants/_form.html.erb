<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css" integrity="sha512-0SPWAwpC/17yYyZ/4HSllgaK7/gg9OlVozq8K7rf3J8LvCjYEEIfzzpnA2/SSjpGIunCSD18r3UhvDcu/xncWA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<%= form_with model: form.restaurant do |f| %>
  <div class="form-control w-full max-w-xs mb-5">
    <%= f.label :name, class: 'label' %>
    <%= f.text_field :name, class: 'input input-bordered w-full max-w-xs' %>
  </div>

  <div class="form-control w-full max-w-xs mb-5">
    <%= f.label :description, class: 'label' %>
    <%= f.text_area :description, class: 'textarea textarea-bordered w-full max-w-xs' %>
  </div>

  <div class="mb-5" data-controller="nested-form">

    <!-- 「画像を追加」する時のHTMLテンプレ -->
    <template data-nested-form-target="template">
      <%= f.fields_for :restaurant_images, RestaurantImage.new, child_index: 'NEW_RECORD' do |restaurant_image| %>
        <%= render 'image_fields', restaurant_image: restaurant_image %>
      <% end %>
    </template>

    <div class="flex items-center gap-3" data-nested-form-target="previewArea">
      <%= f.fields_for :restaurant_images do |restaurant_image| %>
        <%= render 'image_fields', restaurant_image: restaurant_image %>
      <% end %>

      <div class="mb-3" data-nested-form-target="links">
        <%= link_to "画像を追加 +", "#", class: "btn btn-primary", data: { action: "click->nested-form#addAssociation" } %>
      </div>
    </div>
  </div>

  <%= f.submit class: 'btn btn-primary' %>

<% end %>
